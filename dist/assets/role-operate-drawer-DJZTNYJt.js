import{r as i,l as C,P as B,k as e,B as l,M as F}from"./index-BA7W61Th.js";import{j as R,R as M,e as T}from"./TableHeaderOperation-De5kOUSX.js";import{M as v}from"./index-DnBhq_sg.js";import{S}from"./index-ChmbLDeT.js";import{u as N}from"./useRequest-D5aHc4rj.js";import{a as z,d as O}from"./system-manage-DaA6QwHC.js";import{S as E}from"./index-DMbHjEvh.js";import{u as G}from"./form-BSzh_rzb.js";import{u as w}from"./index-wZB2qypa.js";import{D as q}from"./index-BIaaHCMo.js";import{F as K}from"./index-j-OgWvHu.js";import{F as b}from"./index-BnJL6rKO.js";import{I as y}from"./index-CBCmmzTk.js";import"./index-DWYXoqn-.js";import"./tslib.es6-CwN1OpI9.js";import"./index-DHM7bRxY.js";import"./index-DH9h88Qm.js";import"./EllipsisOutlined-Tld8H_El.js";import"./PurePanel-EBpQ4Xmb.js";import"./useBreakpoint-B6geGxKW.js";import"./responsiveObserver-BB31uip5.js";import"./index-D9_c5Gyf.js";import"./index-BEImSPwJ.js";import"./SearchOutlined-BLs8YZXF.js";import"./use-loading-BnRq-ISL.js";import"./subscribeFocus-C0kbgqSh.js";import"./_baseGetTag-BMkVdEYU.js";import"./index-BZu-6YnL.js";import"./debounce-DMi07XbZ.js";import"./index-BykAnZC5.js";import"./row-Eb8ogRv3.js";const P=i.memo(({onClose:a,open:s,roleId:c})=>{const{t:o}=C(),u=o("common.edit")+o("page.manage.role.buttonAuth"),[p,t]=i.useState(),[m,d]=i.useState();async function h(){t([1,2,3,4,5])}async function f(){d([{key:1,title:"button1"},{key:2,title:"button2"},{key:3,title:"button3"},{key:4,title:"button4"},{key:5,title:"button5"},{key:6,title:"button6"},{key:7,title:"button7"},{key:8,title:"button8"},{key:9,title:"button9"},{key:10,title:"button10"}])}function g(){var n,r;(r=(n=window.$message)==null?void 0:n.success)==null||r.call(n,o("common.modifySuccess")),a()}function j(){f(),h()}return B(()=>{j()}),e.jsx(v,{className:"w-480px",open:s,title:u,footer:e.jsxs(S,{className:"mt-16px",children:[e.jsx(l,{size:"small",onClick:a,children:o("common.cancel")}),e.jsx(l,{size:"small",type:"primary",onClick:g,children:o("common.confirm")})]}),onCancel:a,children:e.jsx(R,{checkable:!0,checkedKeys:p,className:"h-280px",height:280,treeData:m,onCheck:n=>t(n)})})});function V(a){return{label:a,value:a}}function I(a){return a?a.map(s=>{const{id:c,label:o}=s;return s.children?{children:I(s.children),key:c,title:o}:{key:c,title:o}}):[]}const $=i.memo(({onClose:a,open:s,roleId:c})=>{const{t:o}=C(),u=o("common.edit")+o("page.manage.role.menuAuth"),[p,t]=i.useState(),[m,d]=i.useState(),{data:h,run:f}=N(z,{manual:!0}),{data:g,run:j}=N(O,{manual:!0}),n=h?h.map(V):[];async function r(){d([1,2,3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21])}function k(){var x,A;(A=(x=window.$message)==null?void 0:x.success)==null||A.call(x,o("common.modifySuccess")),a()}async function D(){t("home"),f(),await j(),await r()}return F(()=>{s&&D()},[s]),e.jsxs(v,{className:"w-480px",open:s,title:u,footer:e.jsxs(S,{className:"mt-16px",children:[e.jsx(l,{size:"small",onClick:a,children:o("common.cancel")}),e.jsx(l,{size:"small",type:"primary",onClick:k,children:o("common.confirm")})]}),onCancel:a,children:[e.jsxs("div",{className:"flex-y-center gap-16px pb-12px",children:[e.jsx("div",{children:o("page.manage.menu.home")}),e.jsx(E,{className:"w-240px",options:n,value:p,onChange:t})]}),e.jsx(R,{checkable:!0,checkedKeys:m,className:"h-280px",height:280,treeData:I(g),onCheck:x=>d(x)})]})}),ye=i.memo(({form:a,handleSubmit:s,onClose:c,open:o,operateType:u,rowId:p})=>{const{t}=C(),{defaultRequiredRule:m}=G(),[d,{setFalse:h,setTrue:f}]=w(),[g,{setFalse:j,setTrue:n}]=w(),r={roleCode:m,roleName:m,status:m};return e.jsxs(q,{open:o,title:t(u==="add"?"page.manage.role.addRole":"page.manage.role.editRole"),footer:e.jsxs(K,{justify:"space-between",children:[e.jsx(l,{onClick:c,children:t("common.cancel")}),e.jsx(l,{type:"primary",onClick:s,children:t("common.confirm")})]}),onClose:c,children:[e.jsxs(b,{form:a,layout:"vertical",children:[e.jsx(b.Item,{label:t("page.manage.role.roleName"),name:"roleName",rules:[r.roleName],children:e.jsx(y,{placeholder:t("page.manage.role.form.roleName")})}),e.jsx(b.Item,{label:t("page.manage.role.roleCode"),name:"roleCode",rules:[r.roleCode],children:e.jsx(y,{placeholder:t("page.manage.role.form.roleCode")})}),e.jsx(b.Item,{label:t("page.manage.role.roleStatus"),name:"status",rules:[r.status],children:e.jsx(M.Group,{children:T.map(k=>e.jsx(M,{value:k.value,children:t(k.label)},k.value))})}),e.jsx(b.Item,{label:t("page.manage.role.roleDesc"),name:"roleDesc",children:e.jsx(y,{placeholder:t("page.manage.role.form.roleDesc")})})]}),u==="edit"&&e.jsxs(S,{children:[e.jsx(l,{onClick:f,children:t("page.manage.role.buttonAuth")}),e.jsx(P,{open:d,roleId:p,onClose:h}),e.jsx(l,{onClick:n,children:t("page.manage.role.menuAuth")}),e.jsx($,{open:g,roleId:p,onClose:j})]})]})});export{ye as default};
