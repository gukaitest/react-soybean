import{f as R,r as c,ax as H,k as e,l as k,a as m,q as I,F as V,B as A}from"./index-BA7W61Th.js";import{b as F,_ as L}from"./tslib.es6-CwN1OpI9.js";import"./_baseGetTag-BMkVdEYU.js";import{d as P}from"./debounce-DMi07XbZ.js";import{u as v}from"./index-1XjXhYWc.js";import{D as T}from"./index-DiqH7O8M.js";import{u as U,a as W}from"./index-BP3MDY2X.js";import{u as z}from"./routerPush-DQ-8oNTW.js";import{M as Z}from"./index-DnBhq_sg.js";import{S as q}from"./index-ChmbLDeT.js";import{I as G}from"./index-CBCmmzTk.js";import{E as Q}from"./index-BEImSPwJ.js";import"./index-kWxUwRvy.js";import"./index-B8i0oWjp.js";import"./ThemeSchemaSwitch-BXtPOb5x.js";import"./index-DH9h88Qm.js";import"./EllipsisOutlined-Tld8H_El.js";import"./PurePanel-EBpQ4Xmb.js";import"./index-DWYXoqn-.js";import"./index-wZB2qypa.js";import"./index-BykAnZC5.js";import"./SearchOutlined-BLs8YZXF.js";function $(){var t=(typeof global>"u"?"undefined":typeof global)=="object"&&global&&global.Object===Object&&global,r=typeof self=="object"&&self&&self.Object===Object&&self;return t||r}$()||(global.Date=Date);function J(t,r){var s,n=R(t),h=(s=r==null?void 0:r.wait)!==null&&s!==void 0?s:1e3,i=c.useMemo(function(){return P(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return n.current.apply(n,F([],L(u),!1))},h,r)},[]);return H(function(){i.cancel()}),{run:i,cancel:i.cancel,flush:i.flush}}const l={"operate-shadow":"_operate-shadow_hubcy_1","operate-item":"_operate-item_hubcy_5"},X=t=>e.jsx("svg",{className:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em",...t,children:e.jsx("path",{fill:"currentColor",d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6l6 6l1.41-1.42L5.83 13H21V7z"})}),Y=t=>e.jsx("svg",{className:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em",...t,children:e.jsx("path",{fill:"currentColor",d:"M7.03 9.97h4v8.92l2.01.03V9.97h3.99l-5-5Z"})}),ee=t=>e.jsx("svg",{className:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em",...t,children:e.jsx("path",{fill:"currentColor",d:"M7.03 13.92h4V5l2.01-.03v8.95h3.99l-5 5Z"})}),te=t=>e.jsx("svg",{className:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em",...t,children:e.jsx("path",{fill:"currentColor",d:"M1 7h6v2H3v2h4v2H3v2h4v2H1zm10 0h4v2h-4v2h2a2 2 0 0 1 2 2v2c0 1.11-.89 2-2 2H9v-2h4v-2h-2a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2m8 0h2a2 2 0 0 1 2 2v1h-2V9h-2v6h2v-1h2v1c0 1.11-.89 2-2 2h-2a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2"})}),se=()=>{const{t}=k();return e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"my-2px"}),e.jsxs("div",{className:"h-44px flex-center gap-14px",children:[e.jsxs("span",{className:"flex-y-center",children:[e.jsx(X,{className:m(l["operate-shadow"],l["operate-item"])}),e.jsx("span",{children:t("common.confirm")})]}),e.jsxs("span",{className:"flex-y-center",children:[e.jsx(Y,{className:m([l["operate-shadow"],l["operate-item"]])}),e.jsx(ee,{className:m(l["operate-shadow"],l["operate-item"])}),e.jsx("span",{children:t("common.switch")})]}),e.jsxs("span",{className:"flex-y-center",children:[e.jsx(te,{className:m(l["operate-shadow"],l["operate-item"])}),e.jsx("span",{children:t("common.close")})]})]})]})},re=c.memo(se),ne=t=>e.jsx("svg",{className:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em",...t,children:e.jsx("path",{fill:"currentColor",d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 0 0 0 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8"})}),oe=c.memo(({active:t,enter:r,menu:s,setActiveRouteName:n})=>{function h(){n(s.key)}return e.jsxs("div",{className:m("mt-8px h-56px flex-y-center cursor-pointer justify-between rounded-4px bg-#e5e7eb  px-14px dark:bg-dark",{"bg-primary":t},{"text-#fff":t}),onClick:r,onMouseEnter:h,children:[e.jsxs("span",{className:"ml-5px flex-1",children:[s.icon,s.label]}),e.jsx(ne,{})]})});function S(t,r=[]){return t&&t.length===0?[]:t.reduce((s,n)=>(n.children||s.push(n),n.children&&n.children.length>0&&S(n.children,r),s),r)}const Ee=c.memo(({onClose:t,show:r})=>{const s=I(V),{t:n}=k(),{allMenus:h}=U(),[i,u]=c.useState(""),[a,b]=c.useState([]),[f,j]=c.useState(""),C=c.useMemo(()=>S(h),[h]);function g(){setTimeout(()=>{t(),b([]),u("")},200)}function E(){var p;const o=C.filter(y=>{var M;const x=i.toLocaleLowerCase().trim();return x&&((M=y.title)==null?void 0:M.includes(x))}),d=((p=o[0])==null?void 0:p.key)??"";b(o),j(d)}function B(){w(-1)}function _(){w(1)}function D(){return a.findIndex(o=>o.key===f)}function w(o){const{length:d}=a;if(d===0)return;const p=D();if(p===-1)return;const y=(p+o+d)%d,x=a[y].key;j(x)}const K=z(),O=J(E,{wait:300});function N(){a.length===0||f===""||(g(),K.routerPushByKeyWithMetaQuery(f))}return v("Escape",g),v("Enter",N),v("uparrow",B),v("downarrow",_),e.jsxs(Z,{className:m({"top-0px rounded-0":s}),closable:!1,footer:s?null:e.jsx(re,{}),height:s?"100%":400,open:r,style:s?{margin:0,maxWidth:"100%",padding:0}:void 0,styles:{content:{height:s?"100vh":"100%",paddingBottom:0}},width:s?"100%":630,onCancel:t,children:[e.jsxs(q.Compact,{className:"w-full",children:[e.jsx(G,{allowClear:!0,placeholder:n("common.keywordSearch"),prefix:e.jsx(W,{className:"text-15px text-#c2c2c2"}),value:i,onChange:o=>u(o.target.value),onInput:O.run}),s&&e.jsx(A,{ghost:!0,type:"primary",onClick:g,children:n("common.cancel")})]}),e.jsx("div",{className:"mt-20px",children:a.length===0?e.jsx(Q,{}):a.map(o=>e.jsx(oe,{active:o.key===f,enter:N,menu:o,setActiveRouteName:j},o.key))})]})});export{Ee as default};
